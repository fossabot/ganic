<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ganic</title>
</head>

<body>
  <p style="text-align: right;">
    Test
    <select id="place">
      <option value="unpkg">unpkg</option>
      <option value="local">local</option>
    </select>
    <select id="env">
      <option value="development">development</option>
      <option value="production.min">production</option>
    </select>

    <select id="select">
      <option value="https://unpkg.com/ganic/umd/ganic.development.js">https://unpkg.com/ganic/umd/ganic.development.js</option>
      <option value="https://unpkg.com/ganic/umd/ganic.production.min.js">https://unpkg.com/ganic/umd/ganic.production.min.js</option>
      <option value="../build/node_modules/ganic/umd/ganic.development.js">./ganic.development.js</option>
      <option value="../build/node_modules/ganic/umd/ganic.production.min.js">./ganic.production.min.js</option>
    </select>
  </p>

  <div id="app" style="text-align: right;"></div>
  <script>
    window.place.onchange = function() {
      localStorage.place = window.place.value;
      window.location.reload();
    };
    window.env.onchange = function() {
      localStorage.env = window.env.value;
      window.location.reload();
    };
    window.place.value = localStorage.script || window.place.value;
    window.env.value = localStorage.script || window.env.value;

    const host = window.place.value === 'local'
      ? '../build/node_modules/'
      : 'https://unpkg.com/';

    const srcs = ['ganic', 'ganic-dom', 'ganic-usex'].map(name =>
      `${host}${name}/umd/${name}.${window.env.value}.js`
    );

    srcs.map(src =>
      document.write(`<script src='${src}'><\/script>`)
    );
  </script>
  <script>
    const App = () => {
      const [count, setCount] = GanicUseX.useState(1);
      const [interval, setInterval] = GanicUseX.useState(1);
      GanicUseX.useInterval(() => {
        setCount(n => n + 1);
        setInterval(n => n * 1.1);
      }, interval);
      const numbers = new Array(count >= 0 ? count : 0).join().split(',').map((x, i) => i);
      const list = numbers.reverse().map(i => ({
        organism: 'i',
        props: { key: i, children: i }
      }));
      return [
        numbers.reverse(),
        { organism: 'br' },
        list,
        { organism: 'h1', props: {children: count}},
        {
          organism: 'button',
          props: {
            onClick: () => setCount(n => n + 1),
            children: '+1'
          }
        },
        {
          organism: 'button',
          props: {
            onClick: () => setCount(n => n - 1),
            children: '-1'
          }
        }
      ];
    };
    GanicDOM.render({ organism: App }, window.app);
  </script>
</body>

</html>